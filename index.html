<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Custom Font: Resistance -->
  <style>
    @font-face {
      font-family: "Resistance";
      src: url("/Digitales-notfall-kit1/Fonts/resistance.woff2") format("woff2"),
           url("/Digitales-notfall-kit1/Fonts/resistance.woff") format("woff");
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }
  </style>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Digital First Aid Kit</title>

  <!-- Tailwind & Custom Theme -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            punkPurple: '#7e1e9c',
            acidYellow: '#fffb00',
            bloodOrange: '#f2542d',
            hawBlue: '#005ca9',
            glitchBlue: '#00f7ff',
            rebelPink: '#f5009c',
            grime: '#1a1a1a',
            bone: '#fefcfb'
          },
          fontFamily: {
            headline: ['"Resistance"', 'cursive'],
            body: ['"Courier Prime"', 'monospace']
          }
        }
      }
    };
  </script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Courier+Prime&display=swap" rel="stylesheet" />

  <!-- Global Styling -->
  <style>
    body {
      background-image: url('https://www.transparenttextures.com/patterns/cardboard-flat.png');
      background-repeat: repeat;
    }
    .btn {
      @apply px-5 py-3 rounded-full text-sm font-bold inline-flex items-center gap-2 border border-black shadow-md hover:scale-105 active:scale-95 transition duration-200 ease-in-out;
    }
  </style>
</head>

<body class="font-body bg-bone text-grime dark:bg-grime dark:text-bone">
  <!-- Your header, main content, and other sections go here -->

  <script>
    const modules = {
      en: [
        {
          question: 'You hit a protest last Friday â€” but forgot to leave your phone at home. Whatâ€™s most likely to snitch on you?',
          options: {
            A: 'Just opened Maps real quick â€” chill, I was lost. ðŸ—ºï¸',
            B: 'My phone stayed in my pocket the whole time â€” I swear! ðŸ“±',
            C: 'Only posted my sneakers. They were serving protest chic. ðŸ“¸'
          }
        },
        {
          question: 'Your crush is into data privacy and abolition. You suggest a joint project (and maybe a date ðŸ‘€). But they never text back. Why?',
          options: {
            A: 'End-to-end encryption canâ€™t hide your crush. Metadata doesnâ€™t lie. ðŸ§ ',
            B: 'Your phone caught spyware before you could even type â€œHi.â€ Your crush? Ghosted. For national security. ðŸ¤–',
            C: 'Your message got scanned, flagged, archived. Now you and your crush are part of someoneâ€™s case study. ðŸš¨'
          }
        },
        {
          question: `Still ghosted by your crush. So you do your own surveillance research. Now youâ€™re getting hit with:
ðŸ§  â€œFake cameras scare burglars!â€
ðŸ“¦ â€œAnonymous SIMs â€” totally not sketchy.â€
ðŸ’» â€œSCAN NOW. Your device is infected.â€
Coincidence? Or cookies?`,
          options: {
            A: 'Theyâ€™re watching â€” with trackers, cookies, and digital fingerprints you canâ€™t wipe. ðŸª',
            B: 'Everything you do? Shipped to giant cloud servers. Then sliced, diced, and analyzed. ðŸ“¡',
            C: 'They watch. They collect. They profile. Now they know you better than you do. ðŸ’€'
          }
        }
      ]
    };

    let currentModule = 0;
    let currentLang = 'en';
    let userAnswers = {};
    const pages = {
      intro1: document.getElementById('intro-page-1'),
      intro2: document.getElementById('intro-page-2'),
      module: document.getElementById('module-container'),
      download: document.getElementById('download-page'),
      conclusion: document.getElementById('conclusion-page')
    };

    function showPage(...ids) {
      Object.entries(pages).forEach(([key, el]) => {
        el.classList.toggle('hidden', !ids.includes(key));
      });
    }

    function showModule(index) {
      const langModules = modules[currentLang];
      if (index >= langModules.length) return showDownload();
      currentModule = index;
      const mod = langModules[index];
      const wrapper = document.createElement('div');
      wrapper.className = 'bg-grime text-bone rounded-lg p-8 shadow-xl border-4 border-rebelPink max-w-3xl mx-auto whitespace-pre-line';
      wrapper.innerHTML = `
        <div class="text-center mb-8">
          <p class="text-xl font-bold">${index + 1}. ${mod.question}</p>
        </div>
        <div class="flex flex-col gap-6 items-center">
          ${Object.entries(mod.options).map(([key, text]) => `<button class="btn w-full max-w-md text-base bg-punkPurple text-white hover:bg-purple-700" data-option="${key}">${key}) ${text}</button>`).join('')}
        </div>
      `;
      pages.module.innerHTML = '';
      pages.module.appendChild(wrapper);
      showPage('module');
      document.querySelectorAll('[data-option]').forEach(btn => {
        btn.addEventListener('click', e => {
          const val = e.currentTarget.dataset.option;
          userAnswers[`module${index + 1}`] = val;
          showModule(index + 1);
        });
      });
    }

    function showDownload() {
      document.getElementById('go-to-conclusion-btn').classList.remove('hidden');
      const combo = Object.values(userAnswers).join('');
      const file = `Zines/Dein_Zine_${combo}.pdf`;
      const link = document.getElementById('zine-download-link');
      link.href = file;
      link.download = `Your_Zine_${combo}.pdf`;
      document.getElementById('print-zine-btn').onclick = () => {
        const win = window.open(file, '_blank');
        if (win) win.onload = () => win.print();
      };
      showPage('download');
    }

    document.getElementById('start-zine-btn').onclick = () => showPage('intro2');
    document.getElementById('next-module-btn-intro').onclick = () => showModule(0);
    document.getElementById('go-to-conclusion-btn').onclick = () => showPage('conclusion');
    document.getElementById('restart-btn').onclick = () => {
      if (confirm("Are you sure you want to restart?")) {
        userAnswers = {};
        currentModule = 0;
        showPage('intro1');
      }
    };
    document.getElementById('darkmode-toggle').onclick = () => {
      const html = document.documentElement;
      html.classList.toggle('dark');
      const isDark = html.classList.contains('dark');
      document.getElementById('darkmode-toggle').innerHTML = isDark
        ? '<i data-lucide="sun"></i>'
        : '<i data-lucide="moon"></i>';
      lucide.createIcons();
    };

    showPage('intro1');
    lucide.createIcons();
  </script>
</body>
</html>
